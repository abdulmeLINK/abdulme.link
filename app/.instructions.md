# Laravel Backend Instructions

---
applyTo: "app/**/*.php"
---

## Laravel Development Rules

### Controllers (â‰¤150 lines)
```php
class ExampleController extends Controller
{
    private ExampleService $service;
    
    public function __construct(ExampleService $service)
    {
        $this->service = $service;
    }
    
    public function index(): JsonResponse
    {
        try {
            $data = $this->service->getAllData();
            return response()->json($data);
        } catch (\Exception $e) {
            return response()->json(['error' => $e->getMessage()], 500);
        }
    }
}
```

### Services (Business Logic)
- All complex logic in services, not controllers
- Dependency injection for DataService
- Return arrays/objects, not Response objects
- Handle exceptions, let controllers format responses

### Required Services
- **PortfolioService**: Project management, filtering, search
- **TerminalService**: Command parsing, file system simulation
- **PreferencesService**: User settings, validation, persistence
- **WallpaperService**: Asset management, thumbnail generation
- **LoadingService**: Boot sequence, progress tracking, session management

### Data Layer
- JSON files in `/storage/data/` directory
- Use DataService for all file operations
- Validate data structure before saving
- Cache frequently accessed data
- No direct database queries - everything via JSON

### API Responses
```php
// Success
return response()->json([
    'success' => true,
    'data' => $data,
    'message' => 'Operation completed'
]);

// Error
return response()->json([
    'success' => false,
    'error' => 'Error message',
    'code' => 'ERROR_CODE'
], 400);
```